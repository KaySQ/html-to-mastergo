(function(c,d){typeof exports=="object"&&typeof module<"u"?module.exports=d():typeof define=="function"&&define.amd?define(d):(c=typeof globalThis<"u"?globalThis:c||self,c.sdk=d())})(this,function(){"use strict";const c={width:"width",height:"height",backgroundColor:"backgroundColor",borderColor:"borderColor",borderWidth:"borderWidth",borderStyle:"borderStyle",color:"color",borderTopLeftRadius:"borderTopLeftRadius",borderTopRightRadius:"borderTopRightRadius",borderBottomLeftRadius:"borderBottomLeftRadius",borderBottomRightRadius:"borderBottomRightRadius",paddingTop:"paddingTop",paddingRight:"paddingRight",paddingBottom:"paddingBottom",paddingLeft:"paddingLeft",x:"x",y:"y",display:"display",flexDirection:"flexDirection",gap:"gap",columnGap:"columnGap",rowGap:"rowGap",alignItems:"alignItems",justifyContent:"justifyContent",textAlign:"textAlign",lineHeight:"lineHeight",fontSize:"fontSize",fontFamily:"fontFamily",fontStyle:"fontStyle",backgroundImage:"backgroundImage",backgroundSize:"backgroundSize",backgroundRepeat:"backgroundRepeat"},d=t=>{const e=getComputedStyle(t);return Object.keys(c).reduce((n,i)=>(e[i]&&(n[i]=e[i]),n),{})},l=t=>({name:t}),f=()=>({isVisible:!0,isLocked:!1}),p=()=>({opacity:1,blendMode:"PASS_THROUGH",isMask:!1}),o=t=>{if(!t)return 0;const e=Number(t.replace("px",""));return isNaN(e)?0:e},E=t=>{var i;if(!t)return null;const e={r:0,g:0,b:0,a:1},r=new RegExp(/rgb\((.*)\)/).exec(t)||new RegExp(/rgba\((.*)\)/).exec(t);if(!r)return e;const n=r[1].split(",");return e.r=Number(n[0])/255,e.g=Number(n[1])/255,e.b=Number(n[2])/255,e.a=Number((i=n[3])!=null?i:1),e},S=t=>({type:"SOLID",isVisible:!0,alpha:1,blendMode:"NORMAL",color:E(t)}),L=(t,e)=>e==="no-repeat"?"FILL":e==="repeat"?"TILE":t==="contain"?"FIT":t==="cover"?"STRETCH":"FILL",I=(t,e,r)=>({type:"IMAGE",isVisible:!0,alpha:1,blendMode:"NORMAL",imageRef:t,scaleMode:L(e,r)}),h=(t,{backgroundImage:e,backgroundRepeat:r,backgroundSize:n})=>{const i=[];return t&&i.push(S(t)),e&&e!=="none"&&i.push(I(e,n,r)),i},N=(t,e={})=>h(t,e),C=(t,e={})=>h(t,e),b=t=>{const e=N(t.backgroundColor,{backgroundImage:t.backgroundImage,backgroundRepeat:t.backgroundRepeat,backgroundSize:t.backgroundSize}),r=C(t.borderColor),n={};return n.fills=e,n.strokes=r,n.strokeWeight=o(t.borderWidth),n.strokeAlign="CENTER",n.strokeCap="NONE",n.strokeJoin="MITER",n},g=t=>{const e={};return e.width=t.width==="auto"?0:o(t.width),e.height=t.height==="auto"?0:o(t.height),e.x=o(t.x),e.y=o(t.y),e},A=t=>{const e={};return e.topLeftRadius=o(t.borderTopLeftRadius)||0,e.topRightRadius=o(t.borderTopRightRadius)||0,e.bottomLeftRadius=o(t.borderBottomLeftRadius)||0,e.bottomRightRadius=o(t.borderBottomRightRadius)||0,e},k=(t,e)=>{const r={},n=g(t);return Object.assign(r,n),Object.assign(r,l(e)),Object.assign(r,f()),Object.assign(r,p()),Object.assign(r,A(t)),r},R=t=>{switch(t){case"flex-start":return"FLEX_START";case"flex-end":return"FLEX_END";case"center":return"CENTER";case"space-between":return"SPACING_BETWEEN";default:return"FLEX_START"}},w=t=>{const e={};if(t.display!=="flex")return e;const r=t.flexDirection==="row";return e.flexMode=r?"HORIZONTAL":"VERTICAL",e.itemSpacing=o(r?t.rowGap:t.columnGap),e.mainAxisAlignItems=R(t.justifyContent),e.crossAxisAlignItems=R(t.alignItems),r?(t.width&&(e.mainAxisSizingMode="FIXED"),t.height&&(e.crossAxisSizingMode="FIXED")):(t.width&&(e.crossAxisSizingMode="FIXED"),t.height&&(e.mainAxisSizingMode="FIXED")),e.paddingTop=o(t.paddingTop),e.paddingRight=o(t.paddingRight),e.paddingBottom=o(t.paddingBottom),e.paddingLeft=o(t.paddingLeft),e},O=t=>{const e={};return Object.assign(e,w(t)),e.clipsContent=!1,e},m=(t,e)=>({...l(t),...f(),...p(),...b(e),...g(e)}),M=t=>{switch(t){case"left":return"LEFT";case"center":return"CENTER";case"right":return"RIGHT";case"justify":return"JUSTIFIED";default:return"LEFT"}},F=t=>{switch(t){case"italic":return"Italic";case"oblique":return"Italic";default:return"Regular"}},B=(t,e)=>{const r={};r.characters=t.textContent||"",r.type="TEXT",r.textAlignHorizontal=M(e.textAlign),r.textStyles=[{start:0,end:r.characters.length,textStyle:{lineHeight:{unit:"PIXELS",value:o(e.lineHeight)},fontSize:o(e.fontSize),fontName:{family:e.fontFamily,style:F(e.fontStyle)}}}],e.backgroundColor=e.color;const n=m(t.textContent||"",e);return Object.assign(r,n),r},G=(t,e)=>{var i;const r=t.getAttribute("src");r&&e.backgroundImage==="none"&&(e.backgroundImage=`url("${r}")`),e.backgroundImage=((i=/url\("(.*)"\)/.exec(e.backgroundImage))==null?void 0:i[1])||"";const n={...m(t.id||t.tagName,e)};return n.type="RECTANGLE",n},j=(t,e)=>{const r={...b(e),...k(e,t),...O(e)};return r.type="FRAME",r},z=(t,e)=>{const r={};return t.style.fill=e.color,r.type="PEN",r.content=t.outerHTML,Object.assign(r,g(e)),r},D=(t,e)=>t.textContent?B(t,e):{},T=(t,e)=>{const r={...d(t),...e};if(r.display==="none")return null;if(r.width==="auto"||r.height==="auto"){const a=document.createRange();a.selectNode(t);const s=a.getBoundingClientRect();r.width=`${s.width}px`,r.height=`${s.height}px`}if(t.tagName==="svg")return z(t,r);if(!t.hasChildNodes())return G(t,r);const n=j(t.id||t.tagName,r);n.children=[];const i=o(r.paddingLeft);let x=o(r.paddingTop);return t.childNodes.forEach(a=>{const s={};s.x=`${i}px`,s.y=`${x}px`;let u;a.nodeType===Node.ELEMENT_NODE&&(u=T(a,s)),a.nodeType===Node.TEXT_NODE&&(u=D(a,{...r,...s})),u&&u.type&&(x+=u.height||0,n.children.push(u))}),n};return t=>{const e=T(t,{});return console.log(e),e}});
