"use strict";const T={width:"width",height:"height",backgroundColor:"backgroundColor",borderColor:"borderColor",borderWidth:"borderWidth",borderStyle:"borderStyle",color:"color",borderTopLeftRadius:"borderTopLeftRadius",borderTopRightRadius:"borderTopRightRadius",borderBottomLeftRadius:"borderBottomLeftRadius",borderBottomRightRadius:"borderBottomRightRadius",paddingTop:"paddingTop",paddingRight:"paddingRight",paddingBottom:"paddingBottom",paddingLeft:"paddingLeft",x:"x",y:"y",display:"display",flexDirection:"flexDirection",gap:"gap",columnGap:"columnGap",rowGap:"rowGap",alignItems:"alignItems",justifyContent:"justifyContent",textAlign:"textAlign",lineHeight:"lineHeight",fontSize:"fontSize",fontFamily:"fontFamily",fontStyle:"fontStyle",backgroundImage:"backgroundImage",backgroundSize:"backgroundSize",backgroundRepeat:"backgroundRepeat"},x=t=>{const r=getComputedStyle(t);return Object.keys(T).reduce((n,i)=>(r[i]&&(n[i]=r[i]),n),{})},l=t=>({name:t}),f=()=>({isVisible:!0,isLocked:!1}),p=()=>({opacity:1,blendMode:"PASS_THROUGH",isMask:!1}),o=t=>{if(!t)return 0;const r=Number(t.replace("px",""));return isNaN(r)?0:r},E=t=>{var i;if(!t)return null;const r={r:0,g:0,b:0,a:1},e=new RegExp(/rgb\((.*)\)/).exec(t)||new RegExp(/rgba\((.*)\)/).exec(t);if(!e)return r;const n=e[1].split(",");return r.r=Number(n[0])/255,r.g=Number(n[1])/255,r.b=Number(n[2])/255,r.a=Number((i=n[3])!=null?i:1),r},S=t=>({type:"SOLID",isVisible:!0,alpha:1,blendMode:"NORMAL",color:E(t)}),L=(t,r)=>r==="no-repeat"?"FILL":r==="repeat"?"TILE":t==="contain"?"FIT":t==="cover"?"STRETCH":"FILL",I=(t,r,e)=>({type:"IMAGE",isVisible:!0,alpha:1,blendMode:"NORMAL",imageRef:t,scaleMode:L(r,e)}),h=(t,{backgroundImage:r,backgroundRepeat:e,backgroundSize:n})=>{const i=[];return t&&i.push(S(t)),r&&r!=="none"&&i.push(I(r,n,e)),i},N=(t,r={})=>h(t,r),C=(t,r={})=>h(t,r),b=t=>{const r=N(t.backgroundColor,{backgroundImage:t.backgroundImage,backgroundRepeat:t.backgroundRepeat,backgroundSize:t.backgroundSize}),e=C(t.borderColor),n={};return n.fills=r,n.strokes=e,n.strokeWeight=o(t.borderWidth),n.strokeAlign="CENTER",n.strokeCap="NONE",n.strokeJoin="MITER",n},u=t=>{const r={};return r.width=t.width==="auto"?0:o(t.width),r.height=t.height==="auto"?0:o(t.height),r.x=o(t.x),r.y=o(t.y),r},A=t=>{const r={};return r.topLeftRadius=o(t.borderTopLeftRadius)||0,r.topRightRadius=o(t.borderTopRightRadius)||0,r.bottomLeftRadius=o(t.borderBottomLeftRadius)||0,r.bottomRightRadius=o(t.borderBottomRightRadius)||0,r},k=(t,r)=>{const e={},n=u(t);return Object.assign(e,n),Object.assign(e,l(r)),Object.assign(e,f()),Object.assign(e,p()),Object.assign(e,A(t)),e},g=t=>{switch(t){case"flex-start":return"FLEX_START";case"flex-end":return"FLEX_END";case"center":return"CENTER";case"space-between":return"SPACING_BETWEEN";default:return"FLEX_START"}},w=t=>{const r={};if(t.display!=="flex")return r;const e=t.flexDirection==="row";return r.flexMode=e?"HORIZONTAL":"VERTICAL",r.itemSpacing=o(e?t.rowGap:t.columnGap),r.mainAxisAlignItems=g(t.justifyContent),r.crossAxisAlignItems=g(t.alignItems),e?(t.width&&(r.mainAxisSizingMode="FIXED"),t.height&&(r.crossAxisSizingMode="FIXED")):(t.width&&(r.crossAxisSizingMode="FIXED"),t.height&&(r.mainAxisSizingMode="FIXED")),r.paddingTop=o(t.paddingTop),r.paddingRight=o(t.paddingRight),r.paddingBottom=o(t.paddingBottom),r.paddingLeft=o(t.paddingLeft),r},O=t=>{const r={};return Object.assign(r,w(t)),r.clipsContent=!1,r},R=(t,r)=>({...l(t),...f(),...p(),...b(r),...u(r)}),F=t=>{switch(t){case"left":return"LEFT";case"center":return"CENTER";case"right":return"RIGHT";case"justify":return"JUSTIFIED";default:return"LEFT"}},M=t=>{switch(t){case"italic":return"Italic";case"oblique":return"Italic";default:return"Regular"}},B=(t,r)=>{const e={};e.characters=t.textContent||"",e.type="TEXT",e.textAlignHorizontal=F(r.textAlign),e.textStyles=[{start:0,end:e.characters.length,textStyle:{lineHeight:{unit:"PIXELS",value:o(r.lineHeight)},fontSize:o(r.fontSize),fontName:{family:r.fontFamily,style:M(r.fontStyle)}}}],r.backgroundColor=r.color;const n=R(t.textContent||"",r);return Object.assign(e,n),e},G=(t,r)=>{var i;const e=t.getAttribute("src");e&&r.backgroundImage==="none"&&(r.backgroundImage=`url("${e}")`),r.backgroundImage=((i=/url\("(.*)"\)/.exec(r.backgroundImage))==null?void 0:i[1])||"";const n={...R(t.id||t.tagName,r)};return n.type="RECTANGLE",n},j=(t,r)=>{const e={...b(r),...k(r,t),...O(r)};return e.type="FRAME",e},z=(t,r)=>{const e={};return t.style.fill=r.color,e.type="PEN",e.content=t.outerHTML,Object.assign(e,u(r)),e},D=(t,r)=>t.textContent?B(t,r):{},m=(t,r)=>{const e={...x(t),...r};if(e.display==="none")return null;if(e.width==="auto"||e.height==="auto"){const a=document.createRange();a.selectNode(t);const s=a.getBoundingClientRect();e.width=`${s.width}px`,e.height=`${s.height}px`}if(t.tagName==="svg")return z(t,e);if(!t.hasChildNodes())return G(t,e);const n=j(t.id||t.tagName,e);n.children=[];const i=o(e.paddingLeft);let d=o(e.paddingTop);return t.childNodes.forEach(a=>{const s={};s.x=`${i}px`,s.y=`${d}px`;let c;a.nodeType===Node.ELEMENT_NODE&&(c=m(a,s)),a.nodeType===Node.TEXT_NODE&&(c=D(a,{...e,...s})),c&&c.type&&(d+=c.height||0,n.children.push(c))}),n},H=t=>{const r=m(t,{});return console.log(r),r};module.exports=H;
